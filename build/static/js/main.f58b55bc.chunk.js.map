{"version":3,"sources":["components/AddPersonForm.js","components/Persons.js","components/FilterForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["AddPersonForm","props","react_default","a","createElement","onSubmit","onChange","onNameChange","value","newName","onNumberChange","newNumber","type","Person","_ref","name","number","Persons","_ref2","persons","deleteClickHandler","map","person","key","Persons_Person","onClick","id","FilterForm","onFilterByChange","Notification","message","style","color","isError","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","services_persons","axios","get","then","response","data","newObject","post","put","concat","delete","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filterBy","setFilterBy","_useState9","_useState10","filteredPersons","setFilteredPersons","_useState11","_useState12","setMessage","useEffect","personService","initialPersons","length","filter","toLowerCase","includes","updatePerson","find","p","changedPerson","objectSpread","returnedPerson","setTimeout","catch","error","components_Notification","components_FilterForm","event","target","components_AddPersonForm","preventDefault","window","confirm","returnedNewPerson","components_Persons","alert","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f58b55bc.chunk.js","sourcesContent":["import React from 'react'\n\nconst AddPersonForm = (props/*{ onSubmit, onNameChange, newName }*/) => {\n  // destructuring props causes newName to be an Object {newName: 'value'} ??\n  return (\n    <div>\n      <h3>Add new</h3>\n    <form onSubmit={props.onSubmit}>\n      <div>\n        name: <input onChange={props.onNameChange} value={props.newName} />\n      </div>\n      <div>\n        number: <input onChange={props.onNumberChange} value={props.newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n    </div>\n  )\n}\n\nexport default AddPersonForm\n","import React from 'react'\n\nconst Person = ({ name, number }) => {\n  return (\n    <span>{name} {number}</span>\n  )\n}\n\nconst Persons = ({ persons, deleteClickHandler }) => {\n  const rows = () => persons.map(person =>\n    <div key={person.name}>\n      <Person\n        name={person.name}\n        number={person.number}\n      />\n      <button onClick={() => deleteClickHandler(person.id)}>delete</button>\n    </div>\n  )\n  return (\n    <div>\n      {rows()}\n    </div>\n  )\n}\n\nexport default Persons\n","import React from 'react'\n\nconst FilterForm = (props) => {\n  return (\n    <div>\n      filter by name <input onChange={props.onFilterByChange} />\n    </div>\n  )\n}\n\nexport default FilterForm\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n\n  if (message === null) {\n    return null\n  }\n\n\n  const messageColor = message.isError ? 'red' : 'green'\n\n  const style = {\n    color: messageColor,\n    background: 'lightgrey',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px'\n  }\n\n\n  return (\n    <div style={style}>\n      {message.message}\n    </div>\n  )\n}\n\nexport default Notification","import axios from 'axios'\n\n//const baseUrl = 'http://localhost:3001/api/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll: getAll,\n  create: create,\n  update: update,\n  deletePerson: deletePerson\n}\n","import React, { useState, useEffect } from 'react'\n\nimport AddPersonForm from './components/AddPersonForm'\nimport Persons from './components/Persons'\nimport FilterForm from './components/FilterForm'\nimport Notification from './components/Notification'\n\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('testi')\n  const [newNumber, setNewNumber] = useState('00110')\n  const [filterBy, setFilterBy] = useState('')\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n\n  // Use effect to handle filterBy or persons change.\n  useEffect(() => {\n    filterBy.length === 0 ? setFilteredPersons(persons) : setFilteredPersons(persons.filter(person => (person.name.toLowerCase().includes(filterBy.toLowerCase()))))\n  }, [filterBy, persons]);\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    if (persons.filter(person => (person.name === newName)).length > 0) {\n      if (window.confirm(`${newName} is already added. Replace the old number?`)) {\n        updatePerson()\n        return\n      } else {\n        return\n      }\n    }\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    personService\n      .create(newPerson)\n      .then(returnedNewPerson => {\n        setPersons(persons.concat(returnedNewPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage({\n          message: `Succesfully added ${returnedNewPerson.name}`,\n          isError: false\n        })\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage({\n          message: `${error.response.data.error}`,\n          isError: true\n        })\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n  }\n\n  const updatePerson = () => {\n\n    const person = persons.find(p => p.name === newName)\n    const changedPerson = { ...person, number: newNumber }\n\n    personService.update(person.id, changedPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\n        setMessage({\n          message: `Succesfully updated number of ${person.name} from ${person.number} to ${returnedPerson.number}`,\n          isError: false\n        })\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage({\n          message: `Error! Information of ${person.name} has been removed from the server!`,\n          isError: true\n        })\n        // Also update persons since a changes have been made at this point.\n        personService\n          .getAll()\n          .then(initialPersons => setPersons(initialPersons))\n      })\n  }\n\n\n  const deletePerson = (id) => {\n    const person = persons.find(p => p.id === id)\n\n    if (!window.confirm(`Delete ${person.name} ?`)) {\n      return\n    }\n\n    personService.deletePerson(id)\n      .then(() => {\n        setPersons(persons.filter(p => p.id !== id))\n        setMessage({\n          message: `Succesfully removed ${person.name}`,\n          isError: false\n        })\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        alert(error)\n      })\n  }\n\n\n  const handlePersonNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handlePersonNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterByChange = (event) => {\n    setFilterBy(event.target.value)\n    // Use effect instead. filterBy might not be updated yet if this happens here.\n    //event.target.value.length === 0 ? setFilteredPersons(persons) : setFilteredPersons(persons.filter(person => (person.name.toLowerCase().includes(event.target.value.toLowerCase()))))\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={message}\n      />\n      <FilterForm\n        onFilterByChange={handleFilterByChange}\n      />\n      <AddPersonForm\n        onSubmit={addPerson}\n        onNameChange={handlePersonNameChange}\n        newName={newName}\n        onNumberChange={handlePersonNumberChange}\n        newNumber={newNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={filteredPersons} deleteClickHandler={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}